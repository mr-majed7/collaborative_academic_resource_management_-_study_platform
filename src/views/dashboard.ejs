<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container">
   
    <!-- Bootstrap Search Bar -->
    <nav class="navbar navbar-light bg-light">
        <div class="container d-flex justify-content-center">
            <form class="d-flex" action="/search" method="post">
                <input class="form-control me-2" type="search" placeholder="Search Materials" aria-label="Search" name="query">
                
                <!-- Filter Dropdown -->
                <select class="form-select me-2" name="filter">
                    <option value="all" selected>All</option>
                    <option value="book">Books</option>
                    <option value="lectureNotes">Lecture Notes</option>
                    <option value="slides">Slides</option>
                    <option value="lectureVideo">Lecture Videos</option>
                </select>
                
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </nav>
    

    <h2>Welcome <%= currentUser %></h2>
    
    <h4>Create Folder</h4>
    <form action="/Folder/<%= currentUser %>" method="post">
        <label for="title">
            <input type="text" name="Title" id="title" placeholder="Folder Title" required>
        </label>
        <br>
        Select Privacy:
        <label>
            <input type="radio" name="Privacy" value="private" required >
            Private
        </label>

        <label>
            <input type="radio" name="Privacy" value="public" required>
            Public
        </label>
        <lable>
            <input type="radio" name="Privacy" value="own institution">
            Own institution
        </lable>

        <br>
        <button>Add Folder</button>
    </form>
    <br>
    <h4>Your Folders:</h4>
    <form action="/show_folder/<%= currentUser %>">
        <button>Folders</button>
    </form>
    <br>
    <form action="/pomodoro">
        <button>Set pomodoro</button>
    </form>
    <% if(booksRevision.length) {%>
            <h3>Books for revision:</h3>
            <% booksRevision.forEach(book => { %>
                <form action="/revision/done/<%= book._id %>?q=book"  method="post">

                    <li ><%= book.Title %></li>
                    <button>done</button>
                </form>
            <% }); %>
          
        

        
    <% } %>

    <% if(notesRevision.length){ %>

        <h3> Pending Revision Lecture Notes </h3>
        <% notesRevision.forEach(note => { %>
            <form action="/revision/done/<%= note._id %>?q=note" method="post">
                <li><%= note.Title %></li>
                <button>done</button>
            </form>
        <% }); %>

    <% } %>

     
    <% if(videosRevision.length){ %>

        <h3>Pending Revision Lecture Videos</h3>
        <% videosRevision.forEach(video => { %>
            <form action="/revision/done/<%= video._id %>?q=video" method="post">

            <li><%= video.Title %></li>
            <button>done</button>
            </form>
            Link: <a href="<%= video.FileLink %>"><%= video.FileLink %></a>
        <% }); %>
        <button>done</button>
        </form>
    <% } %>
    
    <% if(slidesRevision.length){ %>

        <h3>Pending Revision Slides:</h3>
        <% slidesRevision.forEach(slide => { %>
            <form action="/revision/done/<%= slide._id %>?q=slide" method="post">

            <li><%= slide.Title %></li>
            <button>done</button>
            </form>
            Link: <a href="<%= slide.FileLink %>"><%= slide.FileLink %></a>
        <% }); %>
        <button>done</button>
        </form>
    <% } %>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
